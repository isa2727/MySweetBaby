<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>❤️ Kübra ❤️</title>

<style>
*{box-sizing:border-box}

body{
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background: radial-gradient(circle at center, #0f0c29, #1a1a2e, #000);
    font-family: 'Segoe UI', sans-serif;
    overflow:hidden;
    color:white;
}

/* Yıldızlı arka plan */
body::before{
    content:"";
    position:absolute;
    width:200%;
    height:200%;
    background:url("https://www.transparenttextures.com/patterns/stardust.png");
    animation: stars 60s linear infinite;
    opacity:0.3;
}
@keyframes stars{
    from{transform:translate(0,0)}
    to{transform:translate(-500px,-500px)}
}

h1{
    position:absolute;
    top:20px;
    font-size: clamp(18px, 5vw, 34px);
    text-align:center;
    width:90%;
}

.final-message{
    width:85%;
    font-size: clamp(16px, 4.5vw, 26px);
    left:50%;
    transform:translateX(-50%);
}

.score{
    position:absolute;
    top:90px;
    font-size:18px;
    opacity:0.8;
}

.area{
    position:relative;
    width:100%;
    height:100%;
}

/* Neon Kalp */
.heart{
    position:absolute;
    width:70px;
    height:70px;
    transform: rotate(-45deg);
    cursor:pointer;
    animation: pulse 1.4s infinite ease-in-out;
    filter: drop-shadow(0 0 10px currentColor)
            drop-shadow(0 0 20px currentColor);
}

.heart::before,
.heart::after{
    content:"";
    position:absolute;
    width:70px;
    height:70px;
    background:inherit;
    border-radius:50%;
}

.heart::before{ top:-35px; left:0; }
.heart::after{ left:35px; top:0; }

@keyframes pulse{
    0%,100%{ transform: rotate(-45deg) scale(1); }
    50%{ transform: rotate(-45deg) scale(1.2); }
}

.particle{
    position:absolute;
    width:8px;
    height:8px;
    border-radius:50%;
    pointer-events:none;
}

.confetti{
    position:absolute;
    width:6px;
    height:12px;
    pointer-events:none;
}
</style>
</head>

<body>

<h1>❤️ Seni Gerçekten Seviyorum ❤️</h1>

<div class="area" id="area"></div>

<div class="final-message" id="finalMsg">
    ❤️ Sonsuza Kadar Sen ❤️
</div>

<script>
const area = document.getElementById("area");
const finalMsg = document.getElementById("finalMsg");
const scoreText = document.getElementById("score");

let audioCtx;
let score = 0;
let gameFinished = false;
const notes = {
    red: 523.25,
    pink: 659.25,
    purple: 783.99,
    blue: 880
};

const colors = [
    {name:"red", value:"#ff2e63"},
    {name:"pink", value:"#ff00c8"},
    {name:"purple", value:"#8338ec"},
    {name:"blue", value:"#00f5ff"}
];

function initAudio(){
    if(!audioCtx){
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    }
}

function playNote(freq){
    if(!audioCtx) return;

    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();

    osc.type = "sine";
    osc.frequency.setValueAtTime(freq, audioCtx.currentTime);

    gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.4);

    osc.connect(gain);
    gain.connect(audioCtx.destination);

    osc.start();
    osc.stop(audioCtx.currentTime + 0.4);
}

function createHeart(){
    const heart = document.createElement("div");
    heart.className="heart";

    const colorObj = colors[Math.floor(Math.random()*colors.length)];
    heart.style.background=colorObj.value;
    heart.style.color=colorObj.value;
    heart.dataset.note = notes[colorObj.name];

    const safeWidth = window.innerWidth - 80;
    const safeHeight = window.innerHeight - 200;

    heart.style.left = Math.max(10, Math.random() * safeWidth) + "px";
    heart.style.top  = Math.max(120, Math.random() * safeHeight) + "px";

    heart.addEventListener("click", ()=>{ initAudio(); explode(heart); });
    heart.addEventListener("touchstart", (e)=>{
        e.preventDefault();
        initAudio();
        explode(heart);
    });

    area.appendChild(heart);
}

function explode(heart){

    if(gameFinished) return;

    playNote(parseFloat(heart.dataset.note));
    score++;

    const rect = heart.getBoundingClientRect();
    const centerX = rect.left + rect.width/2;
    const centerY = rect.top + rect.height/2;

    for(let i=0;i<15;i++){ // 20 yerine 15 yaptık performans için
        const p=document.createElement("div");
        p.className="particle";
        p.style.background=heart.style.background;
        p.style.left=centerX+"px";
        p.style.top=centerY+"px";
        area.appendChild(p);

        const angle=Math.random()*2*Math.PI;
        const distance=60+Math.random()*40;

        const x=Math.cos(angle)*distance;
        const y=Math.sin(angle)*distance;

        p.animate([
            { transform:"translate(0,0)", opacity:1 },
            { transform:`translate(${x}px,${y}px)`, opacity:0 }
        ],{
            duration:600,
            easing:"ease-out"
        });

        setTimeout(()=>p.remove(),600);
    }

    heart.remove();

    if(score >= 10){
        gameFinished = true;
        showFinal();
        return;
    }

    createHeart();
}
function showFinal(){
    finalMsg.style.opacity = 1;
    createConfetti();
}

function createConfetti(){
    for(let i=0;i<30;i++){
        const c=document.createElement("div");
        c.className="confetti";
        c.style.left=Math.random()*window.innerWidth+"px";
        c.style.top="-20px";
        c.style.background=colors[Math.floor(Math.random()*colors.length)].value;
        document.body.appendChild(c);

        const fall=Math.random()*window.innerHeight+200;

        c.animate([
            {transform:"translateY(0) rotate(0deg)"},
            {transform:`translateY(${fall}px) rotate(720deg)`}
        ],{
            duration:3000+Math.random()*2000,
            easing:"linear"
        });

        setTimeout(()=>c.remove(),5000);
    }
}

for(let i=0;i<6;i++){
    createHeart();
}
</script>

</body>
</html>